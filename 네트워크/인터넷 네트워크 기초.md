# 인터넷 네트워크

어떻게 인터넷 망을 이용해서 내가 원하는 곳에다 리소스를 요청하고, 받아볼 수 있을까? 이를 이해하기 위해서는 인터넷 프로토콜에 대한 이해가 필요하다.

## `IP (인터넷 프로토콜)`

- 인터넷에 연결된 컴퓨터들이 서로 정보를 주고 받기 위한 프로토콜
- 지정한 IP 주소에 데이터 전달
- 패킷이라는 통신 단위로 데이터 전달

### 인터넷을 통해 데이터를 주고 받는 과정 with 인터넷 프로토콜

![스크린샷 2023-10-26 오후 1 57 42](https://user-images.githubusercontent.com/78193416/278303053-202d0035-5be8-433e-a656-94dcf237c93e.png)

- 보내는 곳의 IP 주소와 받는 곳의 IP 주소에 보낼 정보를 담아 패킷으로 만든 후에 인터넷에 패킷을 올린다.
- 인터넷 망의 노드들은 패킷을 분석하여 목적지까지 갈 수 있도록 다음 노드로 패킷을 보낸다.

### IP 프로토콜의 한계

- 비연결성
  - 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송
- 신뢰성
  - 중간에 패킷이 사라지면 ?
  - 패킷이 순서대로 안 오면 ?
- 프로그램 구분
  - 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상이면 ?

## `TCP (Transmission Control Protocol)`

- 이름 그대로 전송을 제어하는 프로토콜
- IP 프로토콜이 가진 문제점 해결

![스크린샷 2023-10-26 오후 2 09 33](https://user-images.githubusercontent.com/78193416/278303135-d0ed8025-7caf-4ef4-a2f1-aae3f715008f.png)

### TCP 특징

- 연결지향 - 3-웨이 핸디쉐이크
  - 연결을 먼저 하고 메시지를 보냄.
  - IP 프로토콜이 가진 비연결성 문제 해결
- 데이터 전달 보증
  - IP 프로토콜이 가진 신뢰성 문제 해결
- 순서 보장
  - IP 프로토콜이 가진 신뢰성 문제 해결
- 현재는 대부분 TCP를 사용한다

### TCP의 연결지향

![스크린샷 2023-10-26 오후 2 14 53](https://user-images.githubusercontent.com/78193416/278303249-f2cbee85-70db-4658-8b34-7750b126c275.png)

- 연결부터 하고 메시지를 보냄
- syn을 보냈는데 syn+ack가 오지 않았다면 메시지를 보내지 않으면 됨
- 논리적(개념적) 연결이다

### TCP의 데이터 전달 보증

- 데이터를 보낸 후에 서버에서 데이터를 받았는 지에 대한 응답을 줌
- 응답이 없다면 데이터를 못 받았구나라고 클라이언트에서 알 수 있음

### TCP의 순서보장

- 패킷1, 패킷2, 패킷3이 패킷1, 패킷3, 패킷2로 도착 했다면 패킷2부터 다시 보내라고 클라이언트에게 요청함
  - 사실 내부로직으로 정렬할 수도 있겠지만, 기본적인 메커니즘은 그렇다!

## `UDP` User Datagram Protocol

- 기능이 거의 없다
- 데이터 전달 및 순서가 보장되지 않지만, 단순하고 빠름
- IP와 거의 같지만 `PORT 정보와 체크섬`만 추가된다
- 기능이 없기 때문에 애플리케이션 레벨에서 추가 작업을 해서 최적화할 수 있다
- 최근에는 UDP로 최적화 하려는 시도가 많음

### `PORT`

- IP만 갖고 통신을 한다고 하면 서버 내부에 어떤 프로그램인지 알 수 없다.
- IP는 서버 주소이고, PORT는 서버 안의 애플리케이션 정도로 이해하자.
- 0 ~ 65535 할당 가능 (2\*\*16)
- 0 ~ 1023: 잘 알려진 포트 (사용하지마)
  - FTP - 20, 21
  - TELNET - 23
  - HTTP - 80
  - HTTPS - 443

### `DNS` Domain Name System

- IP는 기억하기 어렵다
- IP는 변경될 가능성이 크다.
- 도메인 명을 IP 주소로 매핑해주자

![스크린샷 2023-10-26 오후 2 39 11](https://user-images.githubusercontent.com/78193416/278303356-b42240f3-8702-49ec-9e0a-1207ed4dc181.png)
