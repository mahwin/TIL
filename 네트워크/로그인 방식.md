### 로그인 구현 방식

로그인은 세션기반인증방식 또는 토큰기반인증방식으로 구현된다.
HTTP 프로토콜의 특징은 stateless하다는 것이다. 이렇기 때문에 로그인을 했다는 증거를 상태값으로 남겨야하는데, 세션 방식과 토큰 방식이 있다.

#### 세션기반인증방식

1. 로그인 => 세션 ID 생성 => 세션 ID 쿠키로 설정
2. 서버는 세션 ID를 저장하고, 클라이언트는 세션 ID를 쿠키로 저장한다.
3. 해당 쿠키의 세션 ID와 서버의 세션 ID로 로그인을 유지한다.

- 사용자의 상태에 관한 데이터를 메모리나 db에 저장해야하기 때문에 유저의 수가 늘어난다면 메모리 과부하가 일어날 수 있다.

#### 토큰기반인증방식

로그인 했단 증거를 오로지 토큰 자체만으로 처리하는 것을 의미한다.

1. 로그인 => JWT 토큰 생성
2. 클라이언트는 JWT 토큰을 저장한다.
3. 클라이언트는 요청할 때마다 토큰을 헤더에 담아서 보낸다.
4. 서버는 토큰을 검증하고, 토큰에 담긴 정보를 통해 로그인을 유지한다.

#### `JWT`

JWT는 JSON Web Token을 의미하며, 헤더, 페이로드, 서명으로 이루어져 있다.

<img width="752" alt="스크린샷 2024-04-18 오후 3 55 31" src="https://gist.github.com/assets/78193416/4894cf1e-d274-4971-8bb4-2d7fd0c428d1">

`Header`

- 토큰 유형과 서명알고리즘이 base64URI로 인코딩되어 있다.

`Payload`

- 데이터, 토큰 발급자, 토큰 유효기간 등이 base64URI로 인코딩되어 있다.

`Signature`

- 인코딩된 헤더와 페이로드 + 비밀키를 기반으로 헤더에 명시된 알고리즘으로 다시 생성한 서명값이다.

1. 사용자 인증에 필요한 모든 정보는 토큰 자체에 포함되기 때문에 별도의 인증 저장소가 필요없다.
2. 다른 토큰에 비해 경량화되어있다.

#### 주의점

JWT는 payload에 사용자 정보를 담기 때문에, 사용자 정보가 노출될 수 있다. 따라서 중요한 정보는 담지 않는 것이 좋다.
JWT는 정보를 가리기 위함이 아니라 `서버에서 발급한 토큰이 맞는지 검증하기 위함`이다.
