### PCB란?

- PCB는 Process Control Block의 약자로, 운영체제에서 관리하는 프로세스에 대한 메타데이터를 저장한 데이터블록이며 커널 스택에 저장되며 각 프로세스가 생성될 때마다 고유의 PCB가 생성되고, 종료되면 PCB는 제거된다.

> 커널 스택이란?<br>
> 가상 메모리는 사용자공간과 커널공간으로 나뉘는데, 모두 스택 자료구조를 기반으로 관리하기 때문에 유저 스택, 커널 스택으로 불린다. 커널 스택은 커널 모드에서 사용되는 스택으로, 커널모드에서만 접근할 수 있고, 유저 스택도 유저 모드일 때만 접근할 수 있다.

### PCB의 구조

- 프로세스 상태 - 대기중, 실행 중 등 프로세스의 상태
- 프로세스 번호(PID) - 각 프로세스의 고유 식별 번호
- 프로그램 카운터 - 프로세스가 다음에 실행할 명령어의 주소
- CPU 레지스터 - CPU 레지스터의 상태
- 메모리 제한 - 프로세스가 사용할 수 있는 메모리의 범위
- 열린 파일 정보 - 프로세스가 열어둔 파일의 목록

### 컨텍스트 스위칭

컨텍스트 스위칭은 앞서 설명한 PCB를 기반으로 프로세스의 상태를 저장하고 다시 복원시키는 과정이다. 이는 CPU가 한 프로세스에서 다른 프로세스로 전환될 때 발생한다.

![스크린샷 2024-03-12 오후 12 01 49](https://gist.github.com/assets/78193416/6f19864a-a9db-464c-8b3c-f71bb7c6cd62)

### 컨텍스트 스위칭의 비용

1. 유효시간의 발생 : 컨텍스트 스위칭은 유효시간을 발생시킨다. 유효시간은 CPU가 프로세스를 실행하는데 걸리는 시간을 의미한다.
2. 캐시미스 : 캐시 메모리는 CPU가 빠르게 데이터를 읽어오기 위해 사용하는 메모리이다. 컨텍스트 스위칭은 캐시 메모리를 무효화시키기 때문에 새로운 프로세스를 실행할 때 캐시 메모리를 다시 채워야 한다.
   - 해당 데이터가 캐시 메모리에 남아 있으면 메모리 일관성 문제가 발생할 수 있기 때문에 항상 무효화 시킨다.
