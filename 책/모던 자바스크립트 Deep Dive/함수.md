# 함수

## 함수란?

함수는 input을 받아 output을 내보내는 일련의 과정을 정의한 것이다.

프로그래밍에서의 함수는 일련의 과정을 문으로 구현하고 `코드 블록으로 감싸서 하나의 실행 단위로 정의한 것`이다.

## 함수를 사용하는 이유

1. 코드의 중복을 줄일 수 있다.
2. 유지보수를 쉽게 할 수 있다.
3. 코드의 가독성을 높일 수 있다.

## 함수 정의

함수를 4가지 방법으로 정의할 수 있다. 정의된 함수는 자바스크립트 엔진에 의해 함수 객체가 된다.

1. 함수 선언문
2. 함수 표현식
3. Function 생성자 함수
4. 화살표 함수

> 함수는 코드 평가 과정에서 식별자가 암무적으로 생성되고 함수 객체가 할당되기 때문에 함수 정의라고 부른다.

### 함수 선언문

함수 선언문은 함수 리터럴과 형태가 동일하다. 단, 함수 선언문은 함수 이름을 생략할 수 없다.

자바스크립트 엔진은 함수 이름이 있는 함수 리터럴을 단독으로 사용할 경우 함수 선언문으로 해석한다. 함수 리터럴이 값으로 평가되어야 하는 문맥에서는 리터럴 표현식으로 해석한다.

```javascript
// 함수 리터럴로 사용
(function bar() {});
bar(); // ReferenceError: bar is not defined
```

그룹 연산자의 피연사자는 값으로 평가될 수 있는 표현식이어야한다. 위 코드는 함수 선언식처럼 보이지만 함수 리터럴로 해석된다. 이처럼 코드의 문맥에 따라 함수 선언문 또는 함수 리터럴 표현식으로 해석된다.

함수 이름은 함수 몸체 내에서만 참조할 수 있는 식별자다. 그렇다면 함수 선언문의 함수는 어떻게 참조할 수 있는 것을까?

```javascript
function A() {}
A();
```

함수 선언문으로 정의된 함수는 자바스크립트 엔진이 암묵적으로 해당 함수 네임과 같은 이름의 식별자를 생성하고, 거기에 함수 객체를 할당한다.

#### 정리

함수는 함수 이름으로 호출되는 것이 아니라 함수 객체를 가리키는 식별자로 호출된다. 즉, 함수 선언문으로 생성한 함수를 호출한 것은 함수 이름이 아니라 자바스크립트 엔진이 암묵적으로 생성한 식별자로 호출된 것이다.

### 함수 표현식

자바스크립트 함수는 일급 객체이기 때문에 변수에 할당할 수 있다. 이렇게 변수에 할당하는 함수를 함수 표현식이라고 한다. 함수 표현식에서는 함수 리터럴의 이름을 생략하고 익명 수로 정의할 수 있다.

```javascript
const fn = function () {};
```

### 함수 생성 시점과 함수 호이스팅

```javascript
console.log(add); // f add ()
console.log(sub); // undefined
function add() {}
var sub = function () {};
```

함수 선언문의 경우 코드 평가 과정에서 함수 객체가 생성되기 때문에 선언한 곳에 상관없이 함수를 호출할 수 있다.

함수 표현식의 경우 변수 선언문이 평가되어 undefined로 초기화되지만, 할당문이 평가되는 시점에 함수 객체가 할당되기 때문에 변수 선언문 이전에 함수를 호출하면 에러가 발생한다.

따라서 함수 표현식의 경우 함수 호이스팅이 아니라 변수 호이스팅만 일어난다.

함수 선언전에 함수를 사용할 수 있다는 점 때문에 함수 표현식을 선호하는 경우가 많다.

### Function 생성자 함수

자바스크립트의 빌트인 객체 중 하나인 Function 생성자 함수를 사용하여 함수를 생성할 수 있다.

```javascript
const add = new Function("a", "b", "return a + b");
```

- Function 생성자 함수는 클로저를 생성하지 않는 등, 함수 선언문이나 표현식과 다르게 동작하기 때문에 바람직하지 않다.

### 화살표 함수

화살표 함수는 ES6에서 도입된 함수이다. 화살표 함수는 항상 익명 함수로 정의되며, 함수 표현식과 유사하게 변수에 할당할 수 있다.

화살표 함수는 this 바인딩이 항상 상위 스코프의 this를 가리키고 arguments 객체를 생성하지 않는다. 또, 생성자 함수로 사용할 수 없다.

## 참조에 의한 전달과 외부 상태의 변경

매개변수도 함수 몸체 내부에서 변수처럼 취급된다. 즉, 참조값일 경우 함수 내에서 값을 변경하면 외부 상태도 변경된다.

## 다양한 함수의 형태

1. 즉시 실행 함수 IIFE
2. 재귀 함수
3. 중첩 함수
4. 콜백 함수

### 콜백 함수

함수의 매개변수를 통해 다른 함수의 내부로 전달되는 함수를 콜백 함수라고 한다. 대개변수를 통해 함수의 외부에서 콜백 함수를 전달받은 함수를 고차 함수라고 한다.

고차 함수는 콜백 함수를 자신의 일부분처럼 합성해서 사용한다. 고차 함수는 매개변수를 통해 전달받은 콜백 함수의 호출 시점을 결정할 수 있다.

```javascript

higerOrderFunction(function cb(){}) {
  cb();
}

```

- 위 코드는 콜백 함수를 전달받아 호출하는 고차 함수이다.
- 고차 함수가 호출될 때마다 평가되어 함수 객체를 생성한다.
- 콜백 함수를 정의한 후 전달하는 편이 효울적이다.

### 순수 함수와 비순수 함수

부수 효과가 없는 함수를 `순수 함수`, 외부 상태에 의존하거나 외부 상태를 변경하는 함수를 `비순수 함수`라고 한다.

순수 함수는 오직 매개변수에 따라 반환값이 결정되는 함수이다. `순수 함수는 인수의 불변성을 유지하고, 외부 상태를 변경하지 않아야 한다.`
