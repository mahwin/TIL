## 함수형 프로그래밍이란?

위키피디아에서 발췌한 정의는 아래와 같다.

1. `수학 함수`를 사용하고 `부수 효과`를 피하는 것이 특징인 프로그래밍 패러다임
2. `부수 효과` 없이 `순수 함수`만 사용하는 프로그래밍 스타일

### `부수 효과`란

함수가 리턴값 이외에 하는 모든 일을 말합니다. 예를 들어 메일 보내기나 전역 상태 수정하기 같은 일이 부수 효과이다. 대부분의 함수형 프로그래머는 불필요한 부수 효과를 가능한 사용하지 않으려고 한다.

### `순수 함수`란

인자에만 의존하고 부수 효과가 없는 함수를 의미한다.

정의에 따르면 함수형 프로그래머는 항상 부수 효과를 피하고 순수 함수만 사용해야 할 것 같지만, 실제 함수형 프로그래머는 부수 효과와 순수하지 않은 함수를 사용한다.

## 실용적인 측면에서 함수형 프로그래밍 정의의 문제점

문제 1. 부수 효과는 필요하다.

함수형 프로그래밍은 부수 효과를 피해야 하지만, 부수 효과는 소프트웨어를 실행하는 이유이다.

문제 2. 함수형 프로그래밍은 부수 효과를 잘 다룰 수 있다.

함수형 프로그래머는 부수 효과가 실제로 필요하지만 문제가 될 수 있다는 것을 알기 때문에 부수 효과를 잘 다루기 위한 도구를 많이 알고 있다. 정의에서는 순수 함수만 쓰는 것으로 되어 있지만, 함수형 프로그래머는 순수하지 않은 함수도 사용한다. 그리고 순수하지 않은 함수를 잘 다룰 수 있는 기술이 많이 있다.

문제 3. 함수형 프로그래밍은 실용적입니다.

함수형 프로그래밍으로 잘 만들어진 좋은 소프트웨어가 많이 있다.

## 액션과 계산, 데이터 구분하기

함수형 프로그래머는 직감적으로 코드를 세 분류로 나눈다.

1. 액션
2. 계산
3. 데이터

액션은 부르는 시점이나 횟수가 중요한 함수이다. 예를 들어, 데이터베이스에 저장하는 함수나 네트워크로 요청을 보내는 함수가 액션이다.

ex) sendEmail, saveUserDB, getCurrntTime

계산은 실행 가능한 함수를 의미한다.

ex) sum, get_user_name, get_user_age

데이터는 정적이고 보이는 그대로이다.

ex) [1,2,3,4,5] , {name: 'james', age: 20}

함수형 프로그래머는 액션보다 계산을 좋아하고 계산보다 데이터를 좋아합니다.

### 액션, 계산, 데이터를 구분하는 예시

작업 완료 표시를 하면 서버에서 이메일을 통해 알려주는 서비스를 만든다고 생각해보자. 시나리오는 다음과 같다.

1. 사용자가 작업 완료 표시를 함.
   - UI 이벤트이기 때문에 실행 횟수에 의존한다. (액션)
2. 클라이언트가 서버로 메시지를 보냄
   - 메시지를 보내는 것은 액션이고 메시지 자체는 데이터이다.
3. 서버가 메시지를 받음
   - 메시지를 받는 것은 횟수에 의존하므로 액션이다.
4. 서버가 데이터 베이스를 변경
   - 내부 상태를 바꾸는 것은 액션이다.
5. 서버가 누구에게 알림을 보낼지 결정
   - 데이터를 계산하는 것이므로 계산이다.
6. 서버가 이메일을 보냄
   - 이메일을 보내는 것은 액션이다.

### 액션

액션은 실행 시점이나 횟수 또는 둘 다에 의존한다.

액션을 다룰 때 사용할 수 있는 기법

- 시간이 지남에 따라 안전하게 상태를 바꿀 수 있는 방법
- 순서를 보장하는 방법
- 액션이 정확히 한 번만 실행되게 보장하는 방법

### 계산

계산은 입력값으로 출력값을 만드는 것이다. 언제, 어디서 계산해도 결과는 같고 외부에 영향을 주지 않는다.

계산을 다룰 때 사용할 수 있는 기법

- 정확성을 위한 정적 분석
- 소프트웨어에서 쓸 수 있는 수학적 지식
- 테스트 전략

### 데이터

데이터는 이벤트에 대해 기록한 사실이다. 데이터는 실행하는 코드만큼 복잡하지 않기 때문에 다른 것과 구분된다.

데이터를 다룰 때 사용할 수 있는 기법

- 효율적으로 접근하기 위해 데이터를 구성하기
- 데이터를 보관하기 위한 기술
- 데이터를 이용해 중요한 것을 발견하는 원칙

## 액션, 계산, 데이터로 구분하면 얻는 장점은?

함수형 프로그래밍은 단순한 트렌드가 아니다. 오랫동안 쌓아온 수학 지식을 기반으로 하는 가장 오래된 프로그래밍 패러다임이다. 시간에 따라 바뀌는 값을 모델링할 때 동작 방법을 이해나는 것은 중요하지만 쉽지 않다. 실행 시점이나 횟수에 의존하는 코드를 없애면, 코드를 더 쉽게 이해할 수 있고 버그를 막을 수 있다.

데이터와 계산은 실행 시점이나 횟수에 의존하지 않는다. 그래서 코드를 데이터와 계산으로 바꿀수록 분산 시스템에서 생기는 여러 가지 문제를 해결할 수 있다.

액션은 실행 시점과 횟수에 의존하기 때문에 여전히 문제가 되지만, 코드 전체에 영향을 주지 않도록 격리 시켜야 한다.

## 함수형 사고란?

함수형 사고는 함수형 프로그래머가 소프트웨어 문제를 해결하기 위해 사용하는 기술과 생각을 말한다.

먼저 액션과 계산, 데이터를 구분해서 생각하는 것이 중요하다. 두번 째는 일급 추상이라는 개념이다. 이 두 가지 개념은 함수형 프로그래밍으로 실용적이고 튼튼한 프로그램을 만드는 기초가 된다.
