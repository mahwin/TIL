## 피자가게에 함수형 사고 접목하기

### 피자가게에 액션과 계산 데이터로 작업 구분하기

1. 액션

액션은 호출 횟수와 시점에 의존하는 것이다. 오븐이나 배달차 같은 자원과 요리 재료를 사용하는 것은 액션이다.

- 반죽 펴기
- 피자 배달
- 재료 주문

2. 계산

어떤 것을 결정하거나 계획하는 것은 계산이다. 계산은 실행해도 다른 곳에 영향을 주지 않는다.

- 조리법에 나온 것을 두 배로 만들기
- 쇼핑 목록 결정

3. 데이터

결제, 재고, 피자 조리법 같은 것이 데이터이다.

- 고객 주문
- 영수증
- 조리법

### 변경 가능성에 따라 코드 나누기

코드를 변경할 때 드는 비용을 줄이기 위해 함수형 사고로 코드를 구성하면 좋다는 사실을 피자가게에 반영하자.

![스크린샷 2024-06-25 오후 3 22 27](https://gist.github.com/assets/78193416/fd742abb-0ee9-4277-86d1-d700ba0f1bd0)

위쪽으로 갈수록 자주 바뀌는 코드, 아래쪽으로 갈수록 자주 바뀌지 않는 코드이다.

가장 위에 있는 코드는 의존성이 거의 없기 때문에 변경하기 쉽다. 함수형 프로그래머는 이 아키텍처 패턴이 계층을 만들기 때문에 계층형 설계라고 부른다. 계층형 설계는 일반적으로 비즈니스 규칙, 도메인 규칙, 기술 스택 계층으로 나눈다.

### 일급 추상

![스크린샷 2024-06-25 오후 3 26 58](https://gist.github.com/assets/78193416/4c5a0f39-3e59-4047-b997-5c225e310966)

위의 타임라인 다이어그램은 로봇 한 대가 피자를 만들기 위한 액션들을 보여준다.

### 타임라인 커팅을 적용해 분산 시스템 만들기

타임라인 커팅을 이용하면 여러 타임라인이 동시에 진행될 때 서로 순서를 맞출 수 있다.

![스크린샷 2024-06-25 오후 3 31 46](https://gist.github.com/assets/78193416/f9024e8f-fd0f-4aee-8ced-47c21142c629)

### 정리

- 액션과 계산, 데이터를 구분하는 일은 함수형 프로그래머에게 가장 중요하고 첫 번째로 해야 하는 일이다.
- 함수형 프로그래머는 유지보수를 잘 하기 위해 계층형 설계를 사용한다. 계층형 설계는 변경 가능성이 높은 코드와 낮은 코드를 분리한다.
- 타임라인 다이어그램은 시간에 따라 변하는 액션을 시각화하는 방법이다. 타임라인 다이어그램으로 액션이 다른 액션과 어떻게 연결되는지 눈으로 확인할 수 있다.
