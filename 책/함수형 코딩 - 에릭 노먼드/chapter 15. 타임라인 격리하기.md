## 타임라인 다이어그램

타임라인은 액션을 순서대로 나열한 것이다. 타임라인 다이어그램은 시간에 따른 액션 순서를 시각적으로 표시한 것이다.

## 두 가지 타임라인 다이어그램 기본 규칙

1. 두 액션이 순서대로 나타나면 같은 타임라인에 넣는다.

2. 두 액션이 동시에 실행되거나 순서를 예상할 수 없다면 분리된 타임라인에 넣는다.

- 액션은 순서대로 실행되거나 동시에 실행된다.
- 순서대로 실행되는 액션은 같은 타임라인에서 하나가 끝나면 다른 하나가 실행된다.
- 동시에 실행되는 액션은 여러 타임라인에서 나란히 실행된다.

## 액션 순서에 관한 두 가지 사실

1. ++와 +=는 사실 세 단계이다.

total++ 이란 코드는 아래 3가지 순서를 가진다.

```javascript
let temp = total; // 읽기 (액션)
temp = temp + 1; // 더하기(계산)
total = temp; // 쓰기(액션)
```

2. 인자는 함수를 부르기 전에 실행한다.

console.log(total) 이란 코드는 아래 2가지 순서를 가진다.

```javascript
const temp = total; // 읽기(액션)
console.log(temp); // 출력(액션)
```

## 좋은 타임라인의 원칙

1. 타임라인은 적을수록 이해하기 쉽다.

타임라인이 하나인 시스템이 가장 이해하기 쉽다. 타임라인이 하나라면 모든 액션은 앞의 액션 다음에 바로 실행된다. 하지만 요즘 시스템에는 여러 타임라인이 필요하다. 멀티스레드나 비동기 콜백, 클라이언트-서버 간 통신 등을 사용하려면 새로운 타임라인이 필요하다.

새로운 타임라인은 항상 시스템을 이해하기 어렵게 만든다. 타임라인 수를 줄여 이해하기 쉬운 시스템을 만들자. but 타임라인 수를 마음대로 조정할 수는 없다.

2. 타임라인은 짧을수록 이해하기 쉽다.

타임라인을 이해하기 쉽게 만드는 또 다른 방법은 타임라인의 단계를 줄이는 것이다.

3. 공유하는 자원이 적을수록 이해하기 쉽다.

서로 다른 타임라인에 있는 두 액션이 서로 자원을 공유하지 않는다면 실행 순서에 신경 쓸 필요가 없다. 실행 가능한 순ㅅ너의 개수가 줄어들지는 않지만, 신경 서야 할 실행 가능한 순서를 줄일 수 있다.

4. 자원을 공유한다면 서로 조율해야 한다.

공유 자원을 많이 없앤다고 해도 여전히 없앨 수 없는 공유 자원이 남는다. 타임라인은 공유 자원을 안전하게 공유할 수 있어야 한다. 안전하게 공유한다는 말은 올바른 순서대로 자원을 쓰고 돌려준다는 말이다.

5. 시간을 일급으로 다룬다.

액션의 순서와 타이밍을 맞추는 것은 어렵다. 타임라인 다루는 재사용 가능한 객체를 만들면 타이밍 문제를 쉽게 해결할 수 있다.
